#!/bin/env python3

import sys
import os
import tty
import termios
import webbrowser

def input_new(prompt=""):
    fd = sys.stdin.fileno()
    old_settings = termios.tcgetattr(fd)

    try:
        tty.setcbreak(fd)
        sys.stdout.write(prompt)
        sys.stdout.flush()
        input_str = ""
        while True:
            ch = sys.stdin.read(1)
            if ch == '\x1b':  # Escape key
                raise KeyboardInterrupt
            elif ch == '\n':  # Enter key
                break
            else:
                input_str += ch
                sys.stdout.write(ch)
                sys.stdout.flush()
        return input_str
    finally:
        termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)

def open_browser(link):
    os.system(f"setsid -f $BROWSER \"{link}\" &")

# Example usage
try:
    action = input_new("action: ").lower()

    if action in ["cal", "calendar"]: open_browser("https://uga.view.usg.edu/d2l/le/calendar/6637")
    elif action in ["1730", "systems"]: open_browser("https://uga.view.usg.edu/d2l/le/content/3056087/Home")
    elif action in ["odin"]: os.system("$TERMINAL -e ssh -q cap71920@odin.cs.uga.edu")
    elif action in ["2670", "theory"]: open_browser("https://uga.view.usg.edu/d2l/le/content/3066852/Home")
    elif action in ["grafstate", "graf"]: open_browser("https://grafstate.com/shell")
    elif action in ["2720", "data", "datastructures"]: open_browser("https://uga.view.usg.edu/d2l/le/content/3061504/Home")
    else: open_browser(f"https://www.google.com/search?q={action.replace(' ', '+')}")

except KeyboardInterrupt:
    exit(0)
